{% extends "base.html" %}

{% load guardian_tags pasta_tags %}

{% block title %}{{ pasta.name }}{% endblock %}

{% block content %}
  {% get_obj_perms request.user for pasta as "pasta_perms" %}

  <div class="row">
    {% if "write" in pasta_perms %}
      {% include "pasta/_repo_actions.html" %}
    {% endif %}
    <div id="empty-message"></div>

    <div class="span9">
      <div id="files"></div>
    </div>
    <div class="span3">
    </div>
  </div>
{% endblock %}

{% block extra-script %}
<script src="/static/js/underscore.min.js" type="text/javascript"></script>
<script src="/static/js/backbone.min.js" type="text/javascript"></script>
<script src="/static/js/pasta.js" type="text/javascript"></script>
<script type="text/javascript">
  {% get_obj_perms request.user for pasta as "pasta_perms" %}
  $(function() {
    var pasta = new window.Pasta({{ files|jsonify }});
    var mainView = new window.PastaView({ collection: pasta, permissions: {{ pasta_perms|jsonify }} });
  });
</script>
{% endblock %}

{% block templates %}
<script type="text/template" id="file_template">
  Things
</script>
{% endblock %}
